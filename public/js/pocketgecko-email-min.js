pgem.ajaxifyForm=function(e,n=null,t=console.log,o=console.log){e.addEventListener("submit",function(r){r.preventDefault(),"function"==typeof n&&n();const i=new FormData(e);pgem.sendForm(i).then(e=>t(e)).catch(e=>o(e))})},pgem.sendForm=async function(e){e.append("ajax","true"),e.has("action")||e.append("action",pgem.action),e.has("pgem-nonce")||e.append("pgem-nonce",pgem.nonce),e.has("recipient")||e.append("recipient","default");let n=await fetch(pgem.url,{method:"POST",credentials:"same-origin",body:e});if(!n.ok)throw new Error(`HTTP Error: ${n.status}`);return n.text()},pgem.sendEmail=function(e,n,t="default",o=console.log,r=console.log){const i=new FormData;i.append("recipient",t),i.append("subject",e),i.append("body",n),pgem.sendForm(i).then(e=>o(e)).catch(e=>r(e))},window.addEventListener("load",function(){let e=document.querySelector("#pocketgecko-email");if(null==e)return;let n=document.querySelector('#pocketgecko-email>input[type="submit"]'),t=document.querySelector("#pocketgecko-email>output");pgem.ajaxifyForm(e,submit=function(){n.disabled=!0,t.innerHTML="<strong>"+pgem.sendingString+"<span id='pgem-dots'></span></strong>",window.sendingInterval=setInterval(function(){let e=document.querySelector("#pgem-dots");e.innerText+=".",e.innerText.length>6&&(e.innerText="")},200)},success=function(e){n.disabled=!1,t.innerHTML="<strong>"+e+"</strong>",clearInterval(window.sendingInterval)},error=function(e){n.disabled=!1,t.innerHTML="<strong>"+error+"</strong>",clearInterval(window.sendingInterval)})});